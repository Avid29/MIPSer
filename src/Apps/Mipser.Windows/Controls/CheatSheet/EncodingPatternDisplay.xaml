<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="Mipser.Windows.Controls.CheatSheet.EncodingPatternDisplay"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="using:Mipser.Windows.Controls.CheatSheet"
    xmlns:data="using:Mipser.Models.CheatSheet"
    xmlns:convert="using:Mipser.Windows.Converter"
    mc:Ignorable="d">
    
    <UserControl.Resources>
        <convert:EncodingPatternSectionColorConverter x:Key="EncodingPatternSectionColorConverter"
                                                      Palette="{x:Bind SectionBrushPalette}"/>

        <DataTemplate x:Name="EncodingSectionTemplate" x:DataType="data:EncodingSection">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="18"/>
                    <RowDefinition/>
                    <RowDefinition Height="18"/>
                </Grid.RowDefinitions>
                <TextBlock Text="{x:Bind BitRangeEnd}" Margin="4,0" Grid.Row="0"
                           HorizontalAlignment="Left" VerticalAlignment="Top"/>
                <TextBlock Text="{x:Bind BitRangeStart}" Margin="4,0" Grid.Row="0"
                           HorizontalAlignment="Right" VerticalAlignment="Top"/>
                <Border CornerRadius="2" Background="{Binding Type, Converter={StaticResource EncodingPatternSectionColorConverter}}" Height="24" Margin="1,0" Grid.Row="1">
                    <Viewbox Margin="2">
                        <TextBlock Text="{x:Bind Display}" Foreground="Black" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Viewbox>
                </Border>
                <RichTextBlock HorizontalAlignment="Center" VerticalAlignment="Bottom"
                               Grid.Row="2" IsTextSelectionEnabled="False">
                    <Paragraph>
                        <Run Text="{x:Bind BitCount}"/>
                        <Run Text=" "/>
                        <Run x:Uid="BitsRUN" Text="Bits"/>
                    </Paragraph>
                </RichTextBlock>
            </Grid>
        </DataTemplate>
    </UserControl.Resources>
    
    <Grid HorizontalAlignment="Stretch">
        <Border CornerRadius="2" BorderThickness="2" BorderBrush="Black" Background="Black"
                Height="27" VerticalAlignment="Top" Margin="0,17,0,0"/>
        <Grid x:Name="Container" Margin="1,0,0,0"/>
    </Grid>
</UserControl>
